<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Kontrol LED via ThingSpeak</title>
    <style>
      body { font-family: system-ui, sans-serif; padding: 32px; }
      button { margin: 6px; padding: 10px 20px; font-size: 16px; }
      pre { background: #f3f3f3; padding: 10px; }
    </style>
  </head>
  <body>
    <h1>Kontrol LED ESP8266 via ThingSpeak</h1>
    <p>Klik tombol di bawah untuk ON / OFF LED.</p>

    <div>
      <h2>LED 1</h2>
      <button onclick="setLED(1,1)">ON</button>
      <button onclick="setLED(1,0)">OFF</button>
    </div>

    <div>
      <h2>LED 2</h2>
      <button onclick="setLED(2,1)">ON</button>
      <button onclick="setLED(2,0)">OFF</button>
    </div>

    <h3>Log:</h3>
    <pre id="output"></pre>

    <script>
      const API_KEY = "K7Q0Q0BDMI2R331J"; // Write API Key kamu

      async function setLED(field, value) {
        const url = `https://api.thingspeak.com/update?api_key=${API_KEY}&field${field}=${value}`;
        try {
          const r = await fetch(url);
          const res = await r.text(); // ThingSpeak balikin entry_id (angka)
          document.getElementById("output").textContent += 
            `LED${field} set to ${value} â†’ Entry ${res}\n`;
        } catch (err) {
          document.getElementById("output").textContent += 
            `Error: ${err}\n`;
        }
      }
    </script>
  </body>
</html>
